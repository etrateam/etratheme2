{# ===== ETRA Clean Header ===== #}
{% set important_links = theme.settings.get('important_links') %}

<header id="etra-header" class="store-header">
  {# Topbar اختياري #}
  <div class="etra-topbar text-sm">
    <div class="container flex items-center justify-between py-1">
      <div class="flex items-center gap-3">
        {% if important_links %}<salla-menu source="footer" topnav></salla-menu>{% endif %}
      </div>

      <div class="flex items-center gap-2 header-buttons">
        {% if store.settings.is_multilingual or store.settings.currencies_enabled %}
          <button class="btn--rounded-gray etra-pill" onclick="salla.event.dispatch('localization::open')">
            <span class="flag iti__flag iti__{{ user.language.country_code }} rounded-sm"></span>
            <span class="mx-1.5">|</span><span>{{ currency.symbol }}</span>
          </button>
          <salla-localization-modal></salla-localization-modal>
        {% endif %}

        {% if store.scope %}
          <button class="btn--rounded-gray etra-pill" onclick="salla.event.dispatch('scopes::open', {'mode': 'default'})">
            <i class="sicon-location rtl:ml-1 ltr:mr-1"></i>{{ store.scope.name }}
          </button>
        {% endif %}

        <salla-contacts is-header></salla-contacts>
      </div>
    </div>
  </div>

  {# Main Nav sticky #}
  <div class="etra-sticky">
    <div class="container">
      <div class="etra-nav etra-glass">
        <div class="flex items-center gap-3">
          <a class="lg:hidden mburger mburger--collapse leading-none rtl:ml-1 ltr:mr-1" href="#mobile-menu" aria-label="open-menu">
            <i class="sicon-menu text-2xl"></i>
          </a>

        <a class="navbar-brand flex items-center gap-2" href="{{ store.url }}">
          <img src="{{ store.logo }}" alt="{{ store.name }} logo" class="h-8 w-auto" loading="eager" fetchpriority="high">
          {% if is_page('index') %}<h1 class="sr-only">{{ store.name }}</h1>{% else %}<h2 class="sr-only">{{ store.name }}</h2>{% endif %}
        </a>
        </div>

        <div class="flex-1 flex items-center justify-center">
          <custom-main-menu class="hidden lg:block"></custom-main-menu>
          <div class="hidden lg:block w-[42%] mx-4">
            <salla-search inline oval height="40"></salla-search>
          </div>
        </div>

        <div class="flex items-center gap-1">
          <button class="header-btn lg:hidden" onclick="salla.event.dispatch('search::open')" aria-label="search">
            <i class="header-btn__icon sicon-search"></i>
          </button>

          {% if user.type == 'user' %}
            <salla-user-menu avatar-only show-header></salla-user-menu>
          {% else %}
            <button class="header-btn" onclick="salla.event.dispatch('login::open')" aria-label="login">
              <i class="header-btn__icon sicon-user-circle"></i>
            </button>
          {% endif %}

          <salla-cart-summary class="rtl:mr-2 ltr:ml-2">
            <i slot="icon" class="header-btn__icon icon sicon-shopping-bag"></i>
          </salla-cart-summary>
        </div>
      </div>
    </div>
  </div>

  <div class="lg:hidden container mt-2">
    <salla-search inline oval height="38"></salla-search>
  </div>
</header>

{% if store.scope %}
  <salla-scopes selection="{{ store.scope.display_as == 'popup' ? 'mandatory' : 'optional' }}"></salla-scopes>
{% endif %}
